<view><view class="card"><view><view class="top"><view class="dom"></view><view class="title">巡检任务</view><view class="record"><image style="width:30rpx;height:30rpx;margin-right:10rpx;" src="/static/icon/record.png"></image><label class="_span">{{"状态："+info.status_info}}</label></view></view></view><view class="min_card"><view class="data"><label class="work _span">任务：</label><label class="work_name _span">{{info.title}}</label></view><view class="data"><label class="work _span">时间：</label><label class="datetime _span">{{info.patrol_time}}</label></view></view></view><block wx:if="{{info.status==0}}"><view data-event-opts="{{[['tap',[['updateReport',[1]]]]]}}" class="middle" bindtap="__e"><image src="/static/icon/scan.png"></image><view>开始巡检后到指定巡检定点完成打卡</view><view class="button"><image src="/static/icon/dwdk.png"></image><view>开始巡检</view></view></view></block><block wx:else><view class="card1"><view class="item-title"><view class="u-item-title">打卡节点</view></view><block wx:for="{{nodeList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="node_content"><view class="node_list"><view class="node"><view>{{"节点："+item.name}}</view><view style="margin-top:10rpx;">{{"位置："+item.position}}</view></view><view class="node_status"><block wx:if="{{item.status==0}}"><view data-event-opts="{{[['tap',[['comfirm',['$0',index,'$1'],[[['nodeList','',index,'id']],[['nodeList','',index,'coordinate']]]]]]]}}" class="up" bindtap="__e">打卡</view></block><block wx:else><view data-event-opts="{{[['tap',[['detail',['$0'],['nodeList.'+index+'']]]]]}}" bindtap="__e">打卡详情</view></block></view></view></view></block></view></block><u-popup bind:input="__e" vue-id="269c19c0-1" mode="bottom" border-radius="14" closeable="{{true}}" width="650" value="{{show}}" data-event-opts="{{[['^input',[['__set_model',['','show','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="content"><u-form vue-id="{{('269c19c0-2')+','+('269c19c0-1')}}" errorType="{{errorType}}" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('269c19c0-3')+','+('269c19c0-2')}}" label-position="{{labelPosition}}" prop="remark" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" style="font-size:28rpx;" vue-id="{{('269c19c0-4')+','+('269c19c0-3')}}" type="textarea" border="{{border}}" placeholder="请填写备注(非必填),不超过140字" value="{{remark}}" data-event-opts="{{[['^input',[['__set_model',['','remark','$event',[]]]]]]}}" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('269c19c0-5')+','+('269c19c0-2')}}" label-position="{{labelPosition}}" prop="photo" label-width="150" bind:__l="__l" vue-slots="{{['default']}}"><u-upload class="vue-ref" vue-id="{{('269c19c0-6')+','+('269c19c0-5')}}" width="160" height="160" action="{{action}}" header="{{header}}" max-count="3" data-ref="uUpload" data-event-opts="{{[['^onSuccess',[['uploadImg']]],['^onRemove',[['onRemove']]]]}}" bind:onSuccess="__e" bind:onRemove="__e" bind:__l="__l"></u-upload></u-form-item></u-form><view class="confrim-btn"><u-button vue-id="{{('269c19c0-7')+','+('269c19c0-1')}}" type="primary" data-event-opts="{{[['^click',[['addPatrol']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确定打卡</u-button></view></view></u-popup><u-popup bind:input="__e" vue-id="269c19c0-8" mode="bottom" border-radius="14" closeable="{{true}}" width="650" value="{{showDetail}}" data-event-opts="{{[['^input',[['__set_model',['','showDetail','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="content"><u-form vue-id="{{('269c19c0-9')+','+('269c19c0-8')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('269c19c0-10')+','+('269c19c0-9')}}" label-position="{{labelPosition}}" label="备注:" bind:__l="__l" vue-slots="{{['default']}}">{{''+info.remark+''}}</u-form-item><u-form-item vue-id="{{('269c19c0-11')+','+('269c19c0-9')}}" label-position="{{labelPosition}}" label="图片:" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{info.img_arr&&info.img_arr.length>0}}"><view style="display:flex;align-items:center;"><block wx:for="{{info.img_arr}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="width:170rpx;"><u-image vue-id="{{('269c19c0-12-'+index)+','+('269c19c0-11')}}" src="{{item}}" width="160rpx" mode="widthFix" data-event-opts="{{[['^click',[['previewImg',[index]]]]]}}" bind:click="__e" bind:__l="__l"></u-image></view></block></view></block><block wx:else><label class="_span">无</label></block></u-form-item><u-form-item vue-id="{{('269c19c0-13')+','+('269c19c0-9')}}" label-position="{{labelPosition}}" label="状态:" bind:__l="__l" vue-slots="{{['default']}}">已打卡</u-form-item></u-form></view></u-popup><u-toast class="vue-ref" vue-id="269c19c0-14" data-ref="uToast" bind:__l="__l"></u-toast></view>